from typing import List

class Solution:

    # DP on input of only lower case English characters
    def longestIdealString(self, s: str, k: int) -> int:

        # Find max DP value for other characters within k range of current
        def getMaxInRange(i):
            low = max(0, i - k)
            high = min(25, i + k)
            maxInRange = 0
            for j in range(low, high + 1):
                maxInRange = max(maxInRange, dp[j])
            return maxInRange

        dp = [0] * 26
        for char in s:
            i = ord(char) - ord('a')
            dp[i] = 1 + getMaxInRange(i)
        return max(dp)

    # TLE, DP like Longest Increasing Subsequence # 300
    # O(n**2)
    def longestIdealStringDP1(self, s: str, k: int) -> int:
        n = len(s)
        dp = [1] * n
        for i in range(1, n):
            for j in range(i - 1, -1, -1):
                if abs(ord(s[j]) - ord(s[i])) <= k:
                    dp[i] = max(dp[i], dp[j] + 1)
        return max(dp)


import unittest

class TestSolution(unittest.TestCase):
    def testLongestIdealString(self):
        s = Solution()
        self.assertEqual(s.longestIdealString(s = "acfgbd", k = 2), 4)
        self.assertEqual(s.longestIdealString(s = "abcd", k = 3), 4)
        self.assertEqual(s.longestIdealString(s = "pvjcci", k = 4), 2)
        self.assertEqual(s.longestIdealString(s = "eduktdb", k = 15), 5)
        self.assertEqual(s.longestIdealString(s = "wprwcytrvmyfzuhbgrxwzeewiwqbwervdsmamukwnuqkianhkaqoqermhfbeisrljzhmnszxunvfmqpnplbdyjzlgkykikxdteciklkyycmwavpnzxdedckrayuttavufwigwgmvkaexmaayhqkzsngmrlllbqoyabdlhkszshuhjvpzjvayikesygnpxyjtowlzvfgvdgqxgrlgdfsudirkvwnfalytpdvyaijfwvitsqsozrmnfazjqypcajssboxtijxqnnknefdfoevnoxqbuhsxbyaihtewccorpjeepdxsdtbfiajbanfxiftponyxaiafupbdzqpeydjooecclpygyomfxsydtgnyflpanjgdvbeepmbgklwgizagudfjgzliedevhgyrdpfshtlxfklyzotfernyruyatssdtkklnghpuqmobwhyvulvnzumerubvcxrdushvkhyaxvewdaetgcqkqjhckvvrnltdenrwyzktflghzsmvyeatldvgypopposzhjfjzovbvqqcobavsdwrjgnhcuboljufihburnmvxzbdkoguamxayizfenzdjphccxtbuhjjvdfsleszwdelnppplbnxzbvaxtxyxxtjgqdfnockocyrsavumvjmxehsleaiyzimtupcvembdbdzjvxignempujuludurbzgwapigzmbebrbsrylhhfuyswcubmjtyhlwuayawnsnxsgrvbatwoaebabxaxgjaxrkbmlxmjvnoxkymkfmvhsptcyizcyytczbtpxpwudzcbnjklopddekttktwadspclqiaeogmugzroefndrjwizcofhbkfhcgekpxkcgdkxkybpkgudcunezhkyvyxjdtgbstmizmnqbrogpmrcxpwsgycgmracialchkssnuzsqdlcnnsexwzrnlkkwujdhrczysbughdzjqdxhqwwbpmeqnjnqxtzldajdxsicbkevxhgewfhhynkufaysumvmynuiakwajpaaukuoxjdshztgnycfqxhpyhyhcdzuihssklorrqkkkoyyeyllytzebgezobhtlxjepunnnfsarltezukaxkwydvlnmriujgxphnujcqxspwlowcaoapyfnreegrrlmuzvorwdhhybjssgqiprsbwmolhqmbxmdcmdsrzmepegcbabuznpytunymwqqnagllhhhqetimwxonsjpwcavsxacixcnxuxssnalexndslhplfqykrusccxjqapaitkrejxvxhewhzqjzhqhgmekxoeibrwmcjnwchvxeibkvldkcxmzavdyhlcupomwurcqwwefowcbllixjowkrwcmuaypghighfhlswudfplrpcmemxnvgjqloyjmfwptaehqqliwkzsiodfrufxvbwhrzwskuqegxbsxozzfgitcsinznxgutvetuifkkoislsfntoppqjcmmsnxviiatitlsjffvhfwqvzcmjbcicqsyjzqhokgylarlhrbmsiiryohlzpxznhcfsqsfdzgfjlmkajoseaztktaluxclurjmqgriutsptmxglehqbrtxrowatceginootgbcuvrvtgppsnzhxtkblyzffqucxwessywswbubwpdpdninovejzhtldvuokqyrvewafbermfyauoljaemusdaiujlmjjvecixiuauvkmikvjbrutkepxfxqzifdftjiqycivefdhiepdzlnztkgizpbzkbnhvvegfrlrcufxlnyuyubcvlbptmohyogcorndxcjuudvjcfjcwubdqloshnviqbxqhbpkkuvwjrcmurjckcqysffwghuhcniuvuyuecwcovvnzfalsapuztfmlecjmvoxfvpxivuezynsowwlfzudbegecuqeuadexaynqmsmxnzmpsvzvawfoazeymnbwrrcsihiahagpgltlrodxmuzscujvwaxapxiovfrdqvjrptrghxkijcqkujauigtudzxxevgqpkjabbuhworviibjfbhxfffydzpqzismdkoipdhsbxppcqfdkwlybktrgnobmyncjrdnhjlpqrogsdohqilywgcjmjjutsbbodafgagxynsoznuvvmuolckogphnhpqwfobscewitiytsdgjrbhrgdmypzyqvuusuljxeinamzmqwaftasecnabzixlrtewmzhkrqgujnehupyfplqiwbsmrcozgsfunvqviyykndlyyxgiefrpudhounqocsqhuuzyhlqlxtwjpjndbryddtbrqajfyqoeoptaonxizegempakgrfetwaltgxhvbxfdvfszkpcvekmcojfgfvoarbkbhtyzhopdghmusbbhxwvcggxkzmxeecdkhzcatjmaxerlrapenmfwibezcgodmsazrezxbsjrnqnjzwrbywmsoropmmzjmbjbekxspubjkcqtqlmcabrbtsonvylfyzuinvklipuaissfwnaosjzfdpqkpayxxntonkwtxhentdkjozryvqwuzojezmijxicsnumezxahwpnitmlxdtzwjoxzqcvsrduupcitpylummwowiwdryrmsvbrcrndydjnjvryqwwaibfvvqonbuulccfaqcvpmjcyctnecumpmfihymhjsszjwldjznjnuveifghutcoehynvktlvzlvrhlfgajqolvoosvdoibyycrppnzacsbrumctehmfoyjvmqbhkwvkijoysbhbozwwihcogugcwguqzpqxygfqxxwblowffzkrppqznxrtqwypvuwahsvolqaynthpyayymvqmqenjawssxibiyrbzqgjqnodndtomzigkcvtglwkdvfcfhqhzcljpyfdnokdtricxpkcmoqaiuvvmuuvsgqsjuprouxsmaguixdzqebrkmqkwrheepzkjnjhkxnqjhgutgojenkngaxuvopeurnuoisnmobvrrjvftjbdstfpwticzuxhvmbcgojhdkonvfziavsbfryzaexxxmjdnbdpguzulnzfjzyrmphszoadntfpasqdbljnebkqewazmzcpmpjzpkdkdvowlvcyvavaxdgazhuvqjenokkdkqpoevkebsqkbinwnbysuhxvxxyqgxptgmqtgjninhigbsbyksvedbqwmgasxirgmxghfsazvqoxbivglrilmtlzrlzknjwumycgdaipdyxemhvnqvjmyzadjevwhmiwoidbnhvlrnkskerfljthwmwbkkslzvpoabeevhsjlfqvdfgztmumlsvlsqdfsusegxigzaxglwgolvnrwgzeulbgmcefzwvzsvnqjuixnzpwwiihrfgnczyayndvbuomusabzookcudcszsvwwnhamzxjxtikkqwbmblthgyyurmekleqxbuhxmoddtnyezkeojqihhezqrfrarkagkvzyzurssfbqvwxshocncypthqjrjqmvoztbwlhzpfozfsgddfjfrppfdbszipqvlkvkmmrzwvnsnvffiqgemrphlgjwldlaxjvypihjcfinaucuccrmwaosbsvcczepmabrtvuplsgigccfmnmajdfshbvfhgprelgybrtpemmujxiopjjjzasudbkkkpvuigtqsqnsvoksdmckbmritufgiatdnpjenlhzvovacluxqnjqjjzrcgpeubeajfxomumekwnpiwbbbtoaeljenohpfyfdkemgugozzqqzaofnzrdebqyslexbgorxnqplehfnnurpndjflsohazfiahesuwvghirsuxpeprxlffbsblujamtomfbndiahdczivbttlokltejxqnwxcipmxuasoctuonspipqzeyghysrpydoepereeedovccruhnsrtgdikciryjcqaymdruwceaupfurvffwkkdudtlwdpdyrydtiblnkhusatmhmbpyztidrgmtmfyrqngepqmilsvelfuvawyiwjmljmxkdwpqvdxtzibndgtjcsbhzfrlzkxpzefmmrggqkejuhznbyezzqkpromfjbdugeiezsrjxeztjctkzckctzjyyfaddomduzhbshidqmhcgjegmkfsfimpbyyyzarqqvnlnuelafcofmlxtjpizqekcjshvffunsangcjhsfgjiwqvafeggkqxblluwiftvwkhfogtkzqknbsjexicpxpytasrkyvznwijlpwqogulslbwlpimgtzyvcxyfxglfbdiofmttemvzylmyfjjbaszsjldpjjlihsisuzrtovyodnpiyvtlxrsjuvxidwvmanspabtmwhhhfedkxdwvrmeedzkpovdmpblmfnofyntnovuvmychwabegrszdqhprtzfezodijhamrwmdjfraumbahhfbcozlnjvdukmktsryecfqmpgczedfapdnkuthdcgqojgkhwolmkogrqzniwurlwqexbhdsoxquyjimuraqsjnllbndxwzvoaoattgxcotzdluxtpiluqgpywyflggnakzgkkyoaewngcxmlfnailfzycofpkwwrqjaqhtirafkvyljyykplymgtegjsklwhupwvfrnfojjlmumrrtlmcwkulptwjnvfboouthteqfchnvkialazjkayqwrszwisemczezhqungsijerlbrvnsdckcpzplkdtdnowqshbofkecvipahvwnjnknzufpgrcrvocqsfeptahyyehkarwonfttxqfdnrknrcaximsxpoleevvixqjctlokoqodqlbahuspzjxvoaxxlatzbafbjxjwyfnxiqnlhbbdpgljtgunvadujlpdqdqvwoprtkegrwzsmuqzcwtumuoorcdgiwyfhbcrzjmdzuyxemnbxlwrlweobyszyudfexfxbhbwtnpmlsaqahvmtzvhihniyditemzfvczinutetuuxenupfxtzdhtgeuuwjoqcnpwjgryozersznkjyyumusqchiumlmfyczkudniawjtwowocpklrxbonlggeyfrxgkeijqtbnmuodfpmkjjmlfohkdyxlsmetcafyjrhaysailmezckuphxzwyedrfodafchztozhajmzkvuzivmwovsekrbqcatdhuaydbuafsqhnwuhwycjycjmyorqaxdstfvyzkstznvvbinzrxxhktszvdzaurgisvkpnvqaiyjrvhfiopytuwqaxhkgnboeanbaodrqtivgpgpcwgqhmeoajtbuvwrhtgpcgdmxurbkwixlxlbiozugasjzlnsvfopkuqjcylkzjpkwwzbrgvqopmetnpogwnspbmkpsmnkfwtpltozhzfoikbzoqngicfujgjqepuiyjzosypsyxdepwgigrzgspgvizhszmkmurbagrngcjvbvffiznfktlronunmftpewnypscfkjdqixzzawpoejgshoeaodwipakzhqqeomktfxcvqsimbegjboxqqpghvuxhfexqnmhdghdmorymcrvqwglccylqslqudbidqalxlyldusjplaaoiztdqozjfhgmepkdpkdskenirwbkvinqovhfsukxktgrgcqbehmrknmfnrmztfvabjmohawqpluzgiowuhnixzaimppludurberipruffrciorjhjezceqwersojhdpjnckpmrjfneoywkxtihhkbsexupgvblygwbiupfrdlmrpihngfhcydqmbsmroitelcmyxhfsqhwclikdlrypfaaopheqgqbbrmsgzpeioekrjijpjpjzozoivbkydimxxepgcfzzaqjwwncpxmwoswsumzfpsbxctooufosnlhqxxrogtsdaqganzbcwhittwzpalpsnblojsnxvezgdlxjugoooylevfsorksuqwfirzbqzvxqcwaudglrdppmiwyopgrudrftiwdzualpswtmtampyuhycpfnlwfackvaflbhmzxfzobavuircaysovrayfulyzkpozwsftltimkvblykghaubabcmvvlegosxttvzgqlkxghgyryuxbfwkvhvaxqlxvlybecakmtqzhwldmcdlhofwsqqhcgtxrthvufnoheleyglffhpzxmgzjpkzscunsrrhcgrafyssfxnpjzlfuqrcvqraklipptuqdpiskvzbphbzjotepdkrnaqxzsrdiglgpqnikxdxmtacpttpweufrqdmysoehbikkrceegoippuueawphghigvtkiuehrscivehedsibbiztvgwhglmxetuvrqqetwiesphcghurcoypeyvbcazuvpqfskmpkuwxvohqteqkopsrvhdefcygygatfxkoehxbzaugmjvqtjlfgowgvhgpcfxyqylwuplqhrtboxesegiuhkmqyzuafsqubtcpcsfwtqrayibcnxptcepirdfzvgmpcniubhcbovnsqqbxqwpssuaaswsnzatuvmxtjlrscldkzhukfwgqexsuatchzxmtfruigbjmotmjabbobypglyruvwdavsaihsjeuzakgkiiqlisnczppxbttrtkngyajnzmcjsuziadzccbixjcadmdfypbksyowgoczdzbdqgpkpgbbvkgbrivjmykvzowixllhikjbiwjbwhmsvsppkqrptlmmrnmtthkbzelrdbitypqmuijsjirvshgzihrygmzdthqqdnqpenuzxiaoeogtmmrxjxsiteqfiwgptmjuzqphclmztpdcpctdwbknottzuofkuavnbjxtvmqyvqegqdvftnmpxmcbkxkqsufaigdxazhzlxtdtrwszaidxkopnairksvhmgzrcsqxzapyjnffcrdfndypioajbdduftgwzosolnlxhvciwgyrblprnnrefhnmzeucaztujwhoprrubpyxagpjxgzpwkrsiuhgieyxstypqacwrtualqfkzrewkhdqphccmfgggtjwyjmghwglhyczdejxvowexzfehcwsplnbezyqgclkczqkppzmsgmkkevmuijaiomwtvcahuaymgwlrkqmruylttrlayuakfiikpsbowydtahjfilyvsndhtdutfiderbztsfggxhlzvuiluijajtfiuqbccplnpgsnlhbrmojblzghiqvkxplejkxpqtuayahvovfzkjxzipvxktltzdhnfcsnctagiowahfrhjwkescpcxcxwciqfygnwzkgbxodpmoagcngtwclmzylfgprcmyrheyquwziyftmrsddvtzgfpyygnxjlttbszevsivhkfzuhnvggqsxpcoaplyxjgikanntfhppcejcydnhwgzuvnpdxosyvkwlclvjfhxycoqyvtqhxnquojpcyhxosbotmytsguzizovgcunqvonpyiktelqildyuetoquhduvsljyjicswhatzwrxcykmgtmcrnzceukstegbpayluujteekqdaimfiiqoztzwuoscpuqyyhkuoyxhzfpwcmdkmtqwuqmzpmywggnoisqgwgfumqcnkdtazngxnylbtdquxczumzmchtqqpivrjuldxljptwjcawjejrbmioifrvjgslccvnjazkqfkmgwddjoznpvfrkgstaxymopmecfwcdfesyvrxrakspdunibavjdcirrwzmmlraeipuvcdritjvskzmhbvmtcdhsgfexugsfftcdtqvnvvcqwmadggtoxrrsbjmkylumztjoyvjqfqpjlxbzzkmuilctmkvjgvnnaklsggrgbmzkymnaralxeemnzvmtjdmzqqrqkczielzkbgzvjrsfitwlsklqrjollmabgmjozzatlwlbphdkmxbbavqurqodzzdjwpbhrxotswqfpkxhatxmhxxbkbgvgyjkuyaqpwoxvoyzyqfndhlsbkvralcmenalhzyqttfsdfngjszogyuijfqirpzmepsgdbeacfevbwmgtlbddxduabrmruldiowyvqtoghumtqrwufqcquavvmjrafvvwfhatilgmlhvpcbucmaryxbzbejxfxhwnwnubqxrtactvdrnztwtkwfsvwgatvtytzmhjnhbjfftaypqmtxflkswifrvhpmsmrmlzbkysbnhvgxifcjbohsmwrmyjlsoutwcgxjkkbhzhwpkobsvxnihojarpnkuwjomxcajuwhygukywpdeurkkhwstacrmkorpsnknrgaoocpmjtyjufveycqvbolfnsvkjtbkcggpwdyczfkicfqwgebuosflhooswmfnlyoorlqwyynfppapoxjwiquoxdeydmvrrqinnufuwpvxagxqmxabkmsliqjrpsddqudrkldqghifnkbrjtvapicmbnmvuwntlapkjvofyxvmnxyzqbkhixiljbjrbizktgbhuhvggqbnwgibypzngmpawsplldovuqzrzhogswgufchwntgkirdpdbdpjexcdanglafhphtmkppamhnbmccdlvvqjbhohyvfcxrmgdmbfdhzvmsbpmlzjnrfbykxzbhmykysetsblcxcrgddetaaglepketwytouwkhfkgsnjcuekpijpycgfczktzrzlrsmettepsglvpirhgbhvmvmfjwgnleergyecnjkxaimdunfmtrkthybkuhs", k = 10), 6148)


if __name__ == '__main__':
    unittest.main()